(function(W,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("react"),require("axios")):typeof define=="function"&&define.amd?define(["exports","react","axios"],x):(W=typeof globalThis<"u"?globalThis:W||self,x(W.InfoView={},W.React,W.axios))})(this,function(W,x,$){"use strict";var ie={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye;function Pe(){if(ye)return Z;ye=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function m(n,o,l){var g=null;if(l!==void 0&&(g=""+l),o.key!==void 0&&(g=""+o.key),"key"in o){l={};for(var c in o)c!=="key"&&(l[c]=o[c])}else l=o;return o=l.ref,{$$typeof:t,type:n,key:g,ref:o!==void 0?o:null,props:l}}return Z.Fragment=a,Z.jsx=m,Z.jsxs=m,Z}var q={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be;function _e(){return be||(be=1,process.env.NODE_ENV!=="production"&&function(){function t(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case T:return"Profiler";case p:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList";case Y:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case v:return"Portal";case S:return(s.displayName||"Context")+".Provider";case b:return(s._context.displayName||"Context")+".Consumer";case w:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return h=s.displayName||null,h!==null?h:t(s.type)||"Memo";case J:h=s._payload,s=s._init;try{return t(s(h))}catch{}}return null}function a(s){return""+s}function m(s){try{a(s);var h=!1}catch{h=!0}if(h){h=console;var N=h.error,L=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return N.call(h,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",L),a(s)}}function n(s){if(s===R)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===J)return"<...>";try{var h=t(s);return h?"<"+h+">":"<...>"}catch{return"<...>"}}function o(){var s=z.A;return s===null?null:s.getOwner()}function l(){return Error("react-stack-top-frame")}function g(s){if(re.call(s,"key")){var h=Object.getOwnPropertyDescriptor(s,"key").get;if(h&&h.isReactWarning)return!1}return s.key!==void 0}function c(s,h){function N(){se||(se=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",h))}N.isReactWarning=!0,Object.defineProperty(s,"key",{get:N,configurable:!0})}function u(){var s=t(this.type);return ce[s]||(ce[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function d(s,h,N,L,O,I,K,ne){return N=I.ref,s={$$typeof:C,type:s,key:h,props:I,_owner:O},(N!==void 0?N:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:u}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:K}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ne}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function i(s,h,N,L,O,I,K,ne){var P=h.children;if(P!==void 0)if(L)if(G(P)){for(L=0;L<P.length;L++)f(P[L]);Object.freeze&&Object.freeze(P)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(P);if(re.call(h,"key")){P=t(s);var H=Object.keys(h).filter(function(ge){return ge!=="key"});L=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",F[P+L]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,L,P,H,P),F[P+L]=!0)}if(P=null,N!==void 0&&(m(N),P=""+N),g(h)&&(m(h.key),P=""+h.key),"key"in h){N={};for(var ae in h)ae!=="key"&&(N[ae]=h[ae])}else N=h;return P&&c(N,typeof s=="function"?s.displayName||s.name||"Unknown":s),d(s,P,I,O,o(),N,K,ne)}function f(s){typeof s=="object"&&s!==null&&s.$$typeof===C&&s._store&&(s._store.validated=1)}var j=x,C=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Ee=Symbol.for("react.client.reference"),z=j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=Object.prototype.hasOwnProperty,G=Array.isArray,B=console.createTask?console.createTask:function(){return null};j={react_stack_bottom_frame:function(s){return s()}};var se,ce={},de=j.react_stack_bottom_frame.bind(j,l)(),ue=B(n(l)),F={};q.Fragment=R,q.jsx=function(s,h,N,L,O){var I=1e4>z.recentlyCreatedOwnerStacks++;return i(s,h,N,!1,L,O,I?Error("react-stack-top-frame"):de,I?B(n(s)):ue)},q.jsxs=function(s,h,N,L,O){var I=1e4>z.recentlyCreatedOwnerStacks++;return i(s,h,N,!0,L,O,I?Error("react-stack-top-frame"):de,I?B(n(s)):ue)}}()),q}var je;function Re(){return je||(je=1,process.env.NODE_ENV==="production"?ie.exports=Pe():ie.exports=_e()),ie.exports}var e=Re();function $e(t){return t.template?t.template:"tab"}function Me(t){const a={};return Object.entries(t).forEach(([m,n])=>{const o=n.group||"General";a[o]||(a[o]={label:o,type:"fields",fields:[]}),a[o]?.fields?.push({name:m,...n})}),a}const U={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function ee(t){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(t)?t:6}async function De(t){if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(t)}catch(a){throw a}else{const a=document.createElement("textarea");a.value=t,document.body.appendChild(a),a.select();try{document.execCommand("copy")}catch(m){throw m}document.body.removeChild(a)}}const Q=(t,a)=>typeof t=="string"?t.replace(/#(\w+)#/g,(m,n)=>a[n]!==void 0?String(a[n]):m):Array.isArray(t)?t.map(m=>Q(m,a)):t&&typeof t=="object"?Object.fromEntries(Object.entries(t).map(([m,n])=>[Q(m,a),Q(n,a)])):t,ve=t=>{const a=Array.isArray(t?.data?.data)?t.data.data[0]:Array.isArray(t?.data)?t.data[0]:t?.data?.data??t?.data;return a&&typeof a=="object"&&!Array.isArray(a)?a:null},we=(t,a,m)=>{const n=Array.isArray(m?.data?.data)?m.data.data:Array.isArray(m?.data)?m.data:m;if(!Array.isArray(n)||n.length===0)return{};const o={};return n.forEach(l=>{l[t]!=null&&l[a]!=null&&(o[l[t]]=l[a])}),o};function Ne(t,a){if(!a||Object.keys(a).length===0)return t;if(typeof t=="number")return a[String(t)]??t;if(typeof t=="string"){const n=t.split(",").map(o=>o.trim()).map(o=>a[o]).filter(Boolean);return n.length?n.join(", "):t}return t}const ke="https://st.depositphotos.com/2101611/3925/v/450/depositphotos_39258143-stock-illustration-businessman-avatar-profile-picture.jpg";function te({field:t,data:a,methods:m={},sqlOpsUrls:n,refid:o}){const l=t?.name,g=`
    text-sm text-gray-600 break-words
  `,c=`
    block text-sm font-semibold  transition-all duration-300 text-gray-700 capitalize
  `,[u,d]=x.useState(t.options??{});x.useEffect(()=>{let v=!0;return(async()=>{if(t?.options){d(t.options);return}const p=t?.source??{};if(p.type==="method"){const T=p.method,b=T?m[T]:void 0;if(b)try{const S=await Promise.resolve(b());v&&d(S??{})}catch(S){console.error("Method execution failed:",S),v&&d({})}else v&&d({})}if(p.type==="api"&&p.url)try{const T=await $({method:p.method||"GET",url:p.url,data:p.body??{},params:p.params??{},headers:p.headers??{}}),b=t.valueKey||"value",S=t.labelKey||"title",w=we(b,S,T);v&&d(w)}catch(T){console.error("API execution failed:",T),v&&d({})}if(t.table||t.type==="dataSelector"){if(!n){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let T;if(t.type==="dataSelector")T={...t,table:"do_lists",cols:"title,value",where:{groupid:t.groupid??""}};else{if(!t.table||!t.columns){console.error("Invalid SQL field config",t);return}T={...t,table:t.table,cols:t.columns}}t.where&&t.type!=="dataSelector"&&(T.where=o?Q(t.where,{refid:o}):t.where);const b=await $({method:"POST",url:n.baseURL+n.registerQuery,data:{query:T},headers:{Authorization:`Bearer ${n?.accessToken}`}}),S=await $({method:"POST",url:n.baseURL+n.runQuery,data:{queryid:b.data.queryid,filter:{}},headers:{Authorization:`Bearer ${n?.accessToken}`}}),w=t.valueKey||"value",M=t.labelKey||"title",A=we(w,M,S);v&&d(A)}catch(T){console.error("API fetch failed:",T)}}})(),()=>{v=!1}},[t.options,t.source,t.table,t.columns,t.where,o]);const i=typeof l=="string"?a?.[l]:void 0,f=typeof i=="string"?t.type==="date"?i.split("T")[0]:t.type==="time"?i.includes("T")?i.slice(11,16):i.slice(0,5):Ne(i,u):Ne(i,u),j=typeof l=="string"&&(l.toLowerCase().includes("avatar")||l.toLowerCase().includes("logo")),C=f==null?"":typeof f=="string"||typeof f=="number"?f:JSON.stringify(f);return e.jsxs("div",{className:"px-3 py-2 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:c,children:t?.label}),e.jsx("div",{className:"relative",children:j?e.jsx("img",{src:String(f),alt:"avatar",className:"w-16 h-16 rounded-full object-cover border",onError:v=>{const R=v.currentTarget;R.onerror=null,R.src=ke}}):e.jsx("p",{className:g,children:C})})]})}function Ie({commonInfo:t,infoData:a,hiddenFields:m=[]}){return e.jsx("div",{className:"bg-white border border-gray-100 p-4 min-h-3/10 overflow-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 flex flex-col items-center",children:e.jsx("div",{className:"relative w-42 h-42",children:e.jsx("img",{src:String(a.avatar_photo),alt:"Profile",className:" w-full h-full object-cover border-4 rounded-[12px] border-white shadow-lg",onError:n=>{const o=n.currentTarget;o.onerror=null,o.src=ke}})})}),e.jsx("div",{className:"lg:col-span-10 min-h-0 max-h-40  overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:t.fields?.map((n,o)=>{const l=a?.[n.name];return m.includes(n.name)||!l&&l!==!1&&l!==0?null:e.jsx("div",{className:`hover:bg-gray-100 transition-colors duration-200 col-span-12 sm:col-span-6 ${U[ee(n.width)]||"lg:col-span-4"}`,children:e.jsx(te,{field:n,data:a??{}},n?.name||o)},n.name)})})})]})})}function fe({tabObj:t,methods:a,tabName:m,sqlOpsUrls:n,refid:o}){const[l,g]=x.useState(null);return x.useEffect(()=>{let c=!1;return(async()=>{const d=t?.config;if(!d?.type){c||g(null);return}if(d.type==="method"){const i=d.method,f=i?a[i]:void 0;if(f)try{const j=await Promise.resolve(f());c||g(j||null)}catch(j){console.error("Method execution failed:",j),c||g(null)}else c||g(null)}if(d.type==="api")try{const i=await $({method:d.method||"GET",url:d.url,data:d.body||{},params:d.params||{},headers:d.headers||{}});c||g(i.data||null)}catch(i){console.error("API fetch failed:",i),c||g(null)}if(d.type==="sql"&&o&&o!="0"){if(!n){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const i=await $({method:"POST",url:n.baseURL+n.registerQuery,data:{query:{...d,cols:d.cols,table:d.table,where:Q(d.where,{refid:d.refid})}},headers:{Authorization:`Bearer ${n?.accessToken}`}}),f=await $({method:"POST",url:n.baseURL+n.runQuery,data:{queryid:i.data.queryid,filter:{}},headers:{Authorization:`Bearer ${n?.accessToken}`}}),j=ve(f);c||g(j)}catch(i){console.error("API fetch failed:",i)}}})(),()=>{c=!0}},[t?.config?.type||"",t?.config?.method||"",t?.config?.url||"",JSON.stringify(t?.config?.params||{}),JSON.stringify(t?.config?.body||{}),JSON.stringify(t?.config?.headers||{})]),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:l?Object.keys(l).map((c,u)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${U[ee(t.width)]||"lg:col-span-2"}`,children:e.jsx(te,{field:{name:c,label:c},data:l??{},methods:a,refid:o,sqlOpsUrls:n},c)},`field-${u}`)):e.jsx("div",{className:"col-span-12 flex flex-col  min-h-0",children:e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsxs("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 7 4-4 4 4"})]})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:"There are no records to display  at the moment."})]})})})})}function ze({open:t,title:a="Confirm Delete",message:m="Are you sure you want to delete this record?",onConfirm:n,onCancel:o}){return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-sm p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:a}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:m}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:n,className:"px-3 py-1.5 text-sm rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null}function xe({tabObj:t,methods:a,tabName:m,sqlOpsUrls:n,refid:o}){const[l,g]=x.useState(1),[c,u]=x.useState(10),[d,i]=x.useState(""),[f,j]=x.useState(!1),[C,v]=x.useState(null),[R,p]=x.useState([]),T=x.useRef(null),[b,S]=x.useState(null),[w,M]=x.useState({key:"",direction:null}),[A,D]=x.useState(null),J=x.useCallback(async()=>{const r=t?.config;if(!r?.type){p([]);return}if(r.type==="method"){const y=r.method,k=y?a[y]:void 0;if(!k){p([]);return}try{const E=await Promise.resolve(k());p(E||[])}catch{p([])}}if(r.type==="api")try{const y=await $({method:r.method||"GET",url:r.url,data:r.body||{},params:r.params||{},headers:r.headers||{}});p(y.data||[])}catch(y){console.error("API fetch failed:",y),p([])}if(r.type==="sql"&&o&&o!=="0"){if(!n){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const{form:y,actions:k,uimode:E,type:_,unilinks:X,DEBUG:me,...oe}=r,le=await $({method:"POST",url:n.baseURL+n.registerQuery,data:{query:{...oe,where:Q(r.where,{refid:o})}},headers:{Authorization:`Bearer ${n.accessToken}`}}),V=await $({method:"POST",url:n.baseURL+n.runQuery,data:{queryid:le.data.queryid,filter:{}},headers:{Authorization:`Bearer ${n.accessToken}`}});p(V.data?.data??V.data??[])}catch(y){console.error("SQL fetch failed:",y)}}},[t?.config,a,o,n]);x.useEffect(()=>{J()},[J]);const Y=Array.isArray(R)?R:[R],z=(r=>{const y=new Set;return r.forEach(k=>{k&&typeof k=="object"&&Object.keys(k).forEach(E=>y.add(E))}),Array.from(y)})(Y),re=t?.vmode==="edit",G=t?.config,B=G?.["popup.form"]?"popup.form":(G?.form,"form"),se=G?.[B]&&Object.keys(G?.[B]).length>0,ce=G?.info&&Object.keys(G?.info).length>0,de=r=>{let y="asc";w.key===r&&w.direction==="asc"?y="desc":w.key===r&&w.direction==="desc"&&(y=null),M({key:r,direction:y})},ue=r=>!w.key||!w.direction?r:[...r].sort((y,k)=>{const E=y[w.key],_=k[w.key];if(E==null)return w.direction==="asc"?1:-1;if(_==null)return w.direction==="asc"?-1:1;if(typeof E=="boolean"&&typeof _=="boolean")return w.direction==="asc"?E===_?0:E?-1:1:E===_?0:E?1:-1;const X=new Date(E),me=new Date(_);if(!isNaN(X.getTime())&&!isNaN(me.getTime()))return w.direction==="asc"?X.getTime()-me.getTime():me.getTime()-X.getTime();const oe=parseFloat(E),le=parseFloat(_);if(!isNaN(oe)&&!isNaN(le))return w.direction==="asc"?oe-le:le-oe;const V=String(E).toLowerCase(),he=String(_).toLowerCase();return w.direction==="asc"?V<he?-1:V>he?1:0:V>he?-1:V<he?1:0}),F=x.useMemo(()=>{let r=Y;if(d.trim()){const y=d.toLowerCase();r=Y.filter(k=>z.some(E=>{const _=k[E];return _==null?!1:String(_).toLowerCase().includes(y)}))}return ue(r)},[Y,d,z,w]),s=Math.ceil(F.length/c),h=(l-1)*c,N=h+c,L=F.slice(h,N),O=r=>{g(Math.max(1,Math.min(r,s)))},I=r=>{u(r),g(1)},K=()=>{i("")},ne=(r,y)=>{a?.editInfoRecord?.({[B]:t?.config?.[B]},o,r)},P=r=>{a?.viewInfoRecord?.(r,t?.config?.info)},H=r=>{v(r),j(!0)},ae=async()=>{if(C?.id){if(!n){D({type:"error",message:"Delete configuration missing."});return}try{let r=t?.config;const y=r?.["popup.form"]?"popup.form":(r?.form,"form");console.log("config?.[formType]",r?.[y]);const k=r?.[y];if(!k?.source)throw new Error("Form source missing");const E=await $({method:"GET",url:n.baseURL+n.dbopsGetHash,headers:{Authorization:`Bearer ${n.accessToken}`}});let _={...k.source,refid:C.id};k.source.where&&(_={..._,where:Q(k.source.where,{refid:C.id})});const X=await $({method:"POST",url:n.baseURL+n.dbopsGetRefId,data:{operation:"update",source:_,fields:k.fields,forcefill:k.forcefill,datahash:E.data.refhash},headers:{Authorization:`Bearer ${n.accessToken}`}});await $({method:"POST",url:n.baseURL+n.dbopsUpdate,data:{refid:X.data.refid,fields:{blocked:"true"},datahash:E.data.refhash},headers:{Authorization:`Bearer ${n.accessToken}`}}),D({type:"success",message:"Record deleted successfully."}),J()}catch(r){console.error(r),D({type:"error",message:"Failed to delete record. Please try again."})}finally{v(null),j(!1),setTimeout(()=>D(null),3e3)}}},ge=()=>{v(null),j(!1)},Ae=()=>{a?.addInfoRecord?.({[B]:t?.config?.[B]},o)},Le=r=>r.split("_").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),Ge=(r,y)=>{if(r==null||r==="")return e.jsx("span",{className:"text-gray-400 italic",children:"-"});if(typeof r=="boolean")return e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r?"Yes":"No"});switch(y?.toLowerCase()){case"checkbox":return e.jsx("input",{type:"checkbox",checked:!!r,readOnly:!0,className:"w-4 h-4 text-green-600 accent-green-600 cursor-default"});case"date":return new Date(r).toLocaleDateString();case"time":return new Date(r).toLocaleTimeString();case"datetime":return new Date(r).toLocaleString();case"currency":if(typeof r=="number")return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",minimumFractionDigits:2}).format(r);case"number":case"num":return e.jsx("span",{className:"text-center",children:Number(r).toLocaleString()});case"url":return r?e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r}):null;case"email":return r?e.jsx("a",{href:`mailto:${r}`,className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:r}):null;case"tel":case"mob":case"phone":case"mobile":return r?e.jsx("a",{href:`tel:${r}`,className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:r}):null;case"geoloc":case"geolocation":case"geoaddress":return r?e.jsx("a",{href:`https://www.google.com/maps/place/${encodeURIComponent(r)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r}):null;case"color":return r?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"w-5 h-5 rounded-full border",style:{backgroundColor:r}})}):null;case"avatar":return e.jsx("img",{src:r||"/images/user.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover"});case"photo":case"picture":case"media":return e.jsx("img",{src:r||"/images/noimg.png",alt:"media",className:"w-12 h-12 rounded object-cover"});case"file":case"attachment":return r?e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"FILE"}):"No File";case"json":try{const k=typeof r=="string"?JSON.parse(r):r;return e.jsx("pre",{className:"whitespace-pre-wrap text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(k,null,2)})}catch{return String(r)}case"pretty":return e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 bg-gray-100 p-2 rounded",children:typeof r=="object"?JSON.stringify(r,null,2):String(r)});case"uppercase":return String(r).toUpperCase();case"lowercase":return String(r).toLowerCase();case"html":return e.jsx("div",{dangerouslySetInnerHTML:{__html:r}});default:return String(r)}},He=(r,y)=>{De(r).then(()=>{S(y),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{S("")},2e3)}).catch(()=>{S("")})},pe=x.useMemo(()=>({totalRows:F.length,columns:z.length,currentPageStart:h+1,currentPageEnd:Math.min(N,F.length),isFiltered:d.trim().length>0}),[F,Y,z,h,N]);return Y.length===0||z.length===0?e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsxs("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 7 4-4 4 4"})]})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:"There are no records to display in the grid view at the moment."}),se&&e.jsxs("button",{onClick:Ae,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-action cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Record"]})]}):e.jsxs("div",{className:"w-full overflow-hidden flex-1 flex flex-col",children:[A&&e.jsx("div",{className:`mb-3 mx-2 rounded-md px-4 py-2 text-sm font-medium
      ${A?.type==="success"?"bg-green-100 text-green-800 border border-green-300":"bg-red-100 text-red-800 border border-red-300"}`,children:A?.message}),e.jsxs("div",{className:"my-4 mx-2 flex  gap-4 justify-between items-start sm:items-center",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search across all columns...",value:d,onChange:r=>i(r.target.value),className:"block w-full px-10 py-2 border border-gray-300 rounded-lg text-sm placeholder-gray-500  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent "}),d&&e.jsx("button",{onClick:K,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",title:"Clear search",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),se&&e.jsxs("button",{onClick:Ae,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-action cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Record"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-1 border-t border-gray-200 ",children:[e.jsx("div",{className:"flex items-center gap-6 text-sm",children:e.jsx("span",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-600",children:["Showing ",e.jsxs("strong",{className:"text-gray-900",children:[pe.currentPageStart,"-",pe.currentPageEnd]})," of ",e.jsx("strong",{className:"text-gray-900",children:pe.totalRows})," records"]})})}),e.jsxs("div",{className:"flex-1 flex justify-end gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Show:"}),e.jsxs("select",{value:c,onChange:r=>I(Number(r.target.value)),className:"border border-gray-300 text-gray-900 rounded px-1 py-1 text-sm outline-0",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("span",{className:"text-gray-600",children:"per page"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(l-1),disabled:l===1,className:"flex items-center gap-2 text-sm font-medium text-action cursor-pointer bg-white rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("span",{className:"flex items-center gap-2 text-sm",children:e.jsxs("span",{className:"text-gray-600",children:["Page ",e.jsx("strong",{className:"text-gray-900",children:l})," of ",e.jsx("strong",{className:"text-gray-900",children:s})]})}),e.jsx("button",{onClick:()=>O(l+1),disabled:l===s,className:"flex items-center gap-2 text-sm font-medium text-action cursor-pointer bg-white rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]}),F.length===0&&d.trim()&&e.jsxs("div",{className:"h-full flex flex-1 flex-col items-center justify-center py-22 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Results Found"}),e.jsxs("p",{className:"text-sm text-gray-500 text-center max-w-sm mb-4",children:["No records match your search for ",e.jsxs("strong",{children:['"',d,'"']})]}),e.jsx("button",{onClick:K,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:"Clear Search"})]}),F.length>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:" overflow-auto min-w-full divide-y divide-gray-200 border border-gray-200 bordr-t",children:e.jsxs("table",{className:"min-w-full h-full",children:[e.jsx("thead",{className:" text-action",children:e.jsxs("tr",{children:[re&&e.jsx("th",{scope:"col",className:"bg-muted px-4 sm:px-6 py-2 text-left text-xs font-bold uppercase tracking-wider w-32 sticky top-0 left-0 z-20",children:"Actions"}),z.map((r,y)=>e.jsx("th",{scope:"col",className:"bg-muted sticky top-0 z-0 px-4 sm:px-6 py-2 text-left text-xs font-bold uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center gap-1 cursor-pointer select-none",onClick:()=>de(r),children:[e.jsx("span",{className:"truncate",title:Le(r),children:Le(r)}),w?.key===r?w.direction==="asc"?e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 12l5-5 5 5H5z"})}):e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 8l5 5 5-5H5z"})}):e.jsx("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})]})},r))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:L.map((r,y)=>e.jsxs("tr",{className:`hover:bg-secondary transition-colors duration-150 ${y%2===0?"bg-white":"bg-gray-50"}`,children:[re&&e.jsx("td",{className:"px-4 sm:px-6 py-1 whitespace-nowrap text-sm bg-muted text-gray-900 sticky left-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ce&&e.jsx("button",{onClick:()=>P(r),className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded cursor-pointer text-action",title:"View",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>ne(r),className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded cursor-pointer text-action",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>H(r),className:"text-red-600 hover:text-red-800 cursor-pointer transition-colors p-1 hover:bg-red-100 rounded",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}),z.map(k=>e.jsx("td",{className:"px-4 sm:px-6 py-1 text-sm text-gray-900",children:e.jsxs("div",{className:"relative group flex items-center",children:[e.jsx("div",{className:"truncate max-w-xs sm:max-w-none",children:Ge(r[k]??"",k)}),e.jsx("button",{onClick:()=>He(r[k]||"",`${r.id}-${k}`),className:"absolute -right-4 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2 p-1 rounded bg-gray-50 hover:bg-gray-100 cursor-pointer",title:"Copy",children:b===`${r.id}-${k}`?e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-xs text-gray-600",children:"Copied!"})}):e.jsx("i",{className:"fa-regular fa-copy"})})]})},k))]},h+y))})]})})}),e.jsx(ze,{open:f,onConfirm:ae,onCancel:ge})]})}const Se=({groups:t,groupNames:a,setActiveTabIndex:m,activeTabIndex:n})=>e.jsx("nav",{className:"flex flex-col overflow-y-auto h-full px-2 py-1 space-y-1",children:a.length>0?a.map((o,l)=>e.jsx("button",{type:"button",onClick:()=>m(l),className:`cursor-pointer w-full text-left py-2 px-3 rounded-md text-sm font-semibold transition-all duration-200 ${n===l?"bg-white shadow text-action":"text-gray-600 hover:bg-white/50"}`,children:e.jsx("span",{className:"truncate",children:t[o]?.label||o})},o)):e.jsx("div",{className:"py-3 px-2 text-sm text-gray-500",children:"No group available"})}),Oe=({groups:t,groupNames:a,setActiveTabIndex:m,activeTabIndex:n,layoutConfig:o,showScrollHint:l,isCommonInfo:g,tabsNavRef:c})=>{const[u,d]=x.useState(!1),i=x.useRef(null);return x.useEffect(()=>{const f=j=>{i.current&&!i.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),e.jsxs("div",{className:o?.tabNavClass||"relative z-10",children:[l&&e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-12 flex items-center justify-center",children:e.jsx("button",{onClick:()=>c.current?.scrollBy({left:-200,behavior:"smooth"}),className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200 group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-gray-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),e.jsxs("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-18 flex items-center justify-between pr-1",children:[l&&e.jsx("button",{onClick:()=>c.current?.scrollBy({left:200,behavior:"smooth"}),className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200 group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-gray-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"relative",ref:i,children:[e.jsx("button",{onClick:()=>d(!u),className:"ml-1 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200",children:"â‹®"}),u&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 max-h-100 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-30",children:a.map((f,j)=>e.jsx("button",{type:"button",onClick:()=>{m(j),d(!1)},className:`w-full text-left px-3 py-2 text-sm truncate hover:bg-gray-100 ${n===j?"bg-gray-50 font-semibold text-action":"text-gray-700"}`,children:t[f]?.label||f},f))})]})]}),e.jsx("div",{className:`relative bg-gray-100 ${g?"":"rounded-t-lg"} px-12 pt-1 shadow-inner overflow-hidden`,children:e.jsx("nav",{ref:c,className:"relative flex overflow-x-auto scrollbar-hide scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:a.length>0?a.map((f,j)=>e.jsx("button",{type:"button",onClick:()=>m(j),className:`relative cursor-pointer flex-shrink-0
            min-w-[8rem]   
            py-2 px-8
            rounded-t-lg text-xs sm:text-sm font-semibold
            transition-all duration-300 ease-out
            focus:outline-none whitespace-nowrap
            ${n===j?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-1 sm:gap-2",children:e.jsx("span",{className:"truncate",children:t[f]?.label||f})})},f)):e.jsx("div",{className:"py-3 px-6 text-sm text-gray-500",children:"No group available"})})})]})},Ce=({groupNames:t,activeTabIndex:a,layoutConfig:m,tabObj:n,infoData:o,setActiveTabIndex:l,renderView:g,methods:c={},refid:u,sqlOpsUrls:d})=>e.jsxs("div",{className:"bg-white rounded-b-lg border  border-t-0 border-gray-100 p-3 animate-in fade-in duration-300 flex-1 flex flex-col min-h-0",children:[t.length>0?n?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:m?.fieldGridClass||"grid grid-cols-12 gap-2",children:n.fields.map((i,f)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${U[ee(i.width)]||"lg:col-span-2"}`,children:e.jsx(te,{field:i,data:o??{},methods:c,refid:u,sqlOpsUrls:d})},i?.name??`field-${f}`))})}):n?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:g(n,t[a]||"")}):null:e.jsx("div",{className:"flex-1 col-span-full text-center py-8 text-gray-500",children:"No data available"}),t.length>5&&e.jsxs("div",{className:"mt-10 pt-2 border-t border-gray-100 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Tab ",a+1," of ",t.length]}),e.jsxs("div",{className:"flex gap-1",children:[t.slice(0,5).map((i,f)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${f===a?"bg-action w-6":"bg-gray-300"}`},f)),t.length>5&&e.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["+",t.length-5]})]})]}),e.jsxs("div",{className:"hidden sm:flex gap-2",children:[e.jsx("button",{onClick:()=>l(Math.max(0,a-1)),disabled:a===0,className:"px-3 py-1 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("button",{onClick:()=>l(Math.min(t.length-1,a+1)),disabled:a===t.length-1,className:"px-3 py-1 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]}),t.length<=5&&e.jsx("div",{className:"mt-6 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Tab ",a+1," of ",t.length]}),e.jsx("div",{className:"flex gap-1",children:t.map((i,f)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${f===a?"bg-action w-6":"bg-gray-300"}`},f))})]})})]},t[a]);function Te({groups:t,methods:a={},infoData:m,viewRenderers:n={},isCommonInfo:o,layoutConfig:l={},viewMode:g,sqlOpsUrls:c={},refid:u}){const[d,i]=x.useState(0),[f,j]=x.useState(!1),C=x.useRef(null),v=Object.keys(t);x.useEffect(()=>{const A=()=>{if(C.current){const D=C.current;j(D.scrollWidth>D.clientWidth)}};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[v.length]),x.useEffect(()=>{if(C.current&&v.length>0){const A=C.current.children[d];A&&A.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[d,v.length]);const R=g==="tableft",p=g==="tabright",T=!R&&!p,b=t[v[d]??""]||null,S={single:(A,D)=>e.jsx(fe,{tabObj:A,methods:a,tabName:D,sqlOpsUrls:c,refid:u}),grid:(A,D)=>e.jsx(xe,{tabObj:A,methods:a,tabName:D,sqlOpsUrls:c,refid:u})},w=b?.config?.uimode,M=n[w]||S[w]||(()=>e.jsx("div",{className:"flex-1 flex justify-center p-4",children:"No UI mode for this type"}));return T?e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 ",children:[e.jsx(Oe,{groupNames:v,groups:t,setActiveTabIndex:i,activeTabIndex:d,tabsNavRef:C,isCommonInfo:o,showScrollHint:f,layoutConfig:l}),e.jsx(Ce,{groupNames:v,activeTabIndex:d,layoutConfig:l,tabObj:b,infoData:m,setActiveTabIndex:i,renderView:M,groups:t,methods:a,refid:u,sqlOpsUrls:c})]}):e.jsxs("div",{className:"flex-1 flex min-h-0",children:[R&&e.jsx("aside",{className:"flex-shrink-0 w-56 border-r border-gray-200 bg-gray-50 p-2",children:e.jsx(Se,{groupNames:v,groups:t,setActiveTabIndex:i,activeTabIndex:d})}),e.jsx("main",{className:"flex-1 flex flex-col min-h-0 overflow-auto",children:e.jsx(Ce,{groupNames:v,activeTabIndex:d,layoutConfig:l,tabObj:b,infoData:m,setActiveTabIndex:i,renderView:M,groups:t,methods:a,refid:u,sqlOpsUrls:c})}),p&&e.jsx("aside",{className:"flex-shrink-0 w-56 border-l border-gray-200 bg-gray-50 p-2",children:e.jsx(Se,{groupNames:v,groups:t,setActiveTabIndex:i,activeTabIndex:d})})]})}function Be({title:t,children:a,isFirst:m}){const[n,o]=x.useState(m);return e.jsx("div",{className:"group relative mt-1 flex-1 flex flex-col min-h-0 max-h-screen",children:e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[e.jsxs("button",{onClick:()=>o(!n),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${n?"bg-action":"bg-gray-300"}`}),e.jsx("h3",{className:"text-md capitalize font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]}),e.jsxs("div",{className:`relative transition-all duration-300 ${n?"rotate-180":""}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${n?"bg-action opacity-30":"bg-transparent opacity-0"}`}),e.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:`flex-1 flex flex-col min-h-0 transition-all  duration-500 ease-in-out overflow-hidden ${n?"max-h-full opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white flex-1 flex flex-col min-h-0",children:e.jsx("div",{className:"space-y-5 pt-4 flex-1 flex flex-col min-h-0 overflow-y-auto",children:a})})})]})})}function Fe({groups:t,methods:a={},infoData:m,viewRenderers:n={},sqlOpsUrls:o={},refid:l}){const g={single:(c,u)=>e.jsx(fe,{tabObj:c,methods:a,tabName:u,sqlOpsUrls:o,refid:l}),grid:(c,u)=>e.jsx(xe,{tabObj:c,methods:a,tabName:u,sqlOpsUrls:o,refid:l})};return e.jsx("div",{className:"bg-white animate-in fade-in duration-300 rounded-b-2xl border-t-0 border border-gray-100",children:e.jsx("div",{className:"p-4 mx-auto",children:e.jsx("div",{className:"space-y-2 flex flex-col min-h-0",children:t&&Object.entries(t).map(([c,u],d)=>e.jsx(Be,{title:c,isFirst:d===0,children:u?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:u.fields.map((i,f)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${U[ee(i.width)]||"lg:col-span-2"}`,children:e.jsx(te,{methods:a,field:i,data:m??{},sqlOpsUrls:o,refid:l})},i?.name??`field-${f}`))})}):u?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:n[u.config?.uimode]?.(u)||g[u.config?.uimode]?.(u,c)||e.jsx("div",{children:"No renderer for this type"})}):null},c))})})})}function We({title:t,children:a}){return e.jsx("div",{className:"group relative mt-1 flex-1 flex flex-col min-h-0 max-h-screen",children:e.jsxs("div",{className:"flex flex-col min-h-0 relative  bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[e.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),e.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r capitalize from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]})}),e.jsx("div",{className:`flex flex-col min-h-0 transition-all duration-500 ease-in-out opacity-100'
            }`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white flex flex-col min-h-0",children:e.jsx("div",{className:"space-y-5 pt-4 flex-1 flex flex-col min-h-0 overflow-y-auto",children:a})})})]})})}function Qe({groups:t,methods:a={},infoData:m,viewRenderers:n={},sqlOpsUrls:o={},refid:l}){const g={single:(c,u)=>e.jsx(fe,{tabObj:c,methods:a,tabName:u,sqlOpsUrls:o,refid:l}),grid:(c,u)=>e.jsx(xe,{tabObj:c,methods:a,tabName:u,sqlOpsUrls:o,refid:l})};return e.jsx("div",{className:"bg-white animate-in fade-in duration-300 rounded-b-2xl border-t-0 border border-gray-100",children:e.jsx("div",{className:"p-4 mx-auto",children:e.jsx("div",{className:"space-y-2  flex flex-col min-h-0",children:t&&Object.entries(t).map(([c,u],d)=>e.jsx(We,{title:c,children:u?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:u.fields.map((i,f)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${U[ee(i.width)]||"lg:col-span-2"}`,children:e.jsx(te,{methods:a,field:i,data:m??{},sqlOpsUrls:o,refid:l})},i?.name??`field-${f}`))})}):u?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:n[u.config?.uimode]?.(u)||g[u.config?.uimode]?.(u,c)||e.jsx("div",{children:"No renderer for this type"})}):null},c))})})})}function Ye({infoViewJson:t,data:a={},hiddenFields:m=[],groupFieldsFn:n=Me,layoutConfig:o={},viewRenderers:l={},methods:g={}}){const[c,u]=x.useState({}),d=$e(t.infoview??{}),i=t.endPoints??{},f=x.useMemo(()=>n(t.fields||{}),[t.fields,n]),j=t?.source?.refid;let C={...f};t.infoview?.groups&&(C={...C,...t.infoview.groups}),x.useEffect(()=>{let p=!1;return(async()=>{const b=t?.source;if(!b?.type){p||u({});return}if(b.type==="method"){const S=b.method,w=S?g[S]:void 0;if(w)try{const M=await Promise.resolve(w());p||u(M||{})}catch(M){console.error("Method execution failed:",M),p||u({})}else p||u({})}if(b.type==="api")try{const S=await $({method:b.method||"GET",url:b.url,data:b.body||{},params:b.params||{},headers:b.headers||{}});p||u(S.data||{})}catch(S){console.error("API fetch failed:",S),p||u({})}if(b.type==="sql"&&b.refid&&b.refid!="0"){if(!i){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const S=await $({method:"POST",url:i.baseURL+i.registerQuery,data:{query:{...b,cols:b.cols,table:b.table,where:Q(b.where,{refid:b.refid})}},headers:{Authorization:`Bearer ${i?.accessToken}`}}),w=await $({method:"POST",url:i.baseURL+i.runQuery,data:{queryid:S.data.queryid,filter:{}},headers:{Authorization:`Bearer ${i?.accessToken}`}}),M=ve(w)??{};p||u(M)}catch(S){console.error("API fetch failed:",S)}}})(),()=>{p=!0}},[t?.source?.type||"",t?.source?.method||"",t?.source?.url||"",JSON.stringify(t?.source?.params||{}),JSON.stringify(t?.source?.body||{}),JSON.stringify(t?.source?.headers||{})]);const v=C.common||null;v&&delete C.common;const R=p=>{switch(p){case"accordion":return e.jsx(Fe,{groups:C,methods:g,infoData:c,viewRenderers:l,sqlOpsUrls:i,refid:j});case"tab":case"tableft":case"tabright":return e.jsx(Te,{groups:C,viewRenderers:l,layoutConfig:o,methods:g,infoData:c,isCommonInfo:!!v,viewMode:p,sqlOpsUrls:i,refid:j});case"cards":return e.jsx(Qe,{groups:C,viewRenderers:l,methods:g,infoData:c,sqlOpsUrls:i,refid:j});default:return e.jsx(Te,{groups:C,viewRenderers:l,layoutConfig:o,methods:g,infoData:c,isCommonInfo:!!v,viewMode:p,sqlOpsUrls:i,refid:j})}};return e.jsxs("div",{className:o.containerClass||"h-screen flex flex-col ",children:[v&&e.jsx(Ie,{commonInfo:v,infoData:c,hiddenFields:m}),R(d)]})}W.InfoView=Ye,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
