(function(W,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("react"),require("axios")):typeof define=="function"&&define.amd?define(["exports","react","axios"],h):(W=typeof globalThis<"u"?globalThis:W||self,h(W.InfoView={},W.React,W.axios))})(this,function(W,h,I){"use strict";var oe={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function Ne(){if(me)return Z;me=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function c(a,o,l){var x=null;if(l!==void 0&&(x=""+l),o.key!==void 0&&(x=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:t,type:a,key:x,ref:o!==void 0?o:null,props:l}}return Z.Fragment=n,Z.jsx=c,Z.jsxs=c,Z}var J={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function ke(){return he||(he=1,process.env.NODE_ENV!=="production"&&function(){function t(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case y:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case L:return"SuspenseList";case te:return"Activity"}if(typeof r=="object")switch(typeof r.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),r.$$typeof){case N:return"Portal";case w:return(r.displayName||"Context")+".Provider";case T:return(r._context.displayName||"Context")+".Consumer";case D:var m=r.render;return r=r.displayName,r||(r=m.displayName||m.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case _:return m=r.displayName||null,m!==null?m:t(r.type)||"Memo";case z:m=r._payload,r=r._init;try{return t(r(m))}catch{}}return null}function n(r){return""+r}function c(r){try{n(r);var m=!1}catch{m=!0}if(m){m=console;var k=m.error,$=typeof Symbol=="function"&&Symbol.toStringTag&&r[Symbol.toStringTag]||r.constructor.name||"Object";return k.call(m,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",$),n(r)}}function a(r){if(r===C)return"<>";if(typeof r=="object"&&r!==null&&r.$$typeof===z)return"<...>";try{var m=t(r);return m?"<"+m+">":"<...>"}catch{return"<...>"}}function o(){var r=p.A;return r===null?null:r.getOwner()}function l(){return Error("react-stack-top-frame")}function x(r){if(K.call(r,"key")){var m=Object.getOwnPropertyDescriptor(r,"key").get;if(m&&m.isReactWarning)return!1}return r.key!==void 0}function d(r,m){function k(){G||(G=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",m))}k.isReactWarning=!0,Object.defineProperty(r,"key",{get:k,configurable:!0})}function j(){var r=t(this.type);return B[r]||(B[r]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),r=this.props.ref,r!==void 0?r:null}function u(r,m,k,$,F,M,re,b){return k=M.ref,r={$$typeof:g,type:r,key:m,props:M,_owner:F},(k!==void 0?k:null)!==null?Object.defineProperty(r,"ref",{enumerable:!1,get:j}):Object.defineProperty(r,"ref",{enumerable:!1,value:null}),r._store={},Object.defineProperty(r._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(r,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(r,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:re}),Object.defineProperty(r,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:b}),Object.freeze&&(Object.freeze(r.props),Object.freeze(r)),r}function f(r,m,k,$,F,M,re,b){var v=m.children;if(v!==void 0)if($)if(Y(v)){for($=0;$<v.length;$++)s(v[$]);Object.freeze&&Object.freeze(v)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else s(v);if(K.call(m,"key")){v=t(r);var A=Object.keys(m).filter(function(R){return R!=="key"});$=0<A.length?"{key: someKey, "+A.join(": ..., ")+": ...}":"{key: someKey}",ie[v+$]||(A=0<A.length?"{"+A.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,$,v,A,v),ie[v+$]=!0)}if(v=null,k!==void 0&&(c(k),v=""+k),x(m)&&(c(m.key),v=""+m.key),"key"in m){k={};for(var P in m)P!=="key"&&(k[P]=m[P])}else k=m;return v&&d(k,typeof r=="function"?r.displayName||r.name||"Unknown":r),u(r,v,M,F,o(),k,re,b)}function s(r){typeof r=="object"&&r!==null&&r.$$typeof===g&&r._store&&(r._store.validated=1)}var i=h,g=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),O=Symbol.for("react.client.reference"),p=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=Object.prototype.hasOwnProperty,Y=Array.isArray,se=console.createTask?console.createTask:function(){return null};i={react_stack_bottom_frame:function(r){return r()}};var G,B={},H=i.react_stack_bottom_frame.bind(i,l)(),le=se(a(l)),ie={};J.Fragment=C,J.jsx=function(r,m,k,$,F){var M=1e4>p.recentlyCreatedOwnerStacks++;return f(r,m,k,!1,$,F,M?Error("react-stack-top-frame"):H,M?se(a(r)):le)},J.jsxs=function(r,m,k,$,F){var M=1e4>p.recentlyCreatedOwnerStacks++;return f(r,m,k,!0,$,F,M?Error("react-stack-top-frame"):H,M?se(a(r)):le)}}()),J}var xe;function Se(){return xe||(xe=1,process.env.NODE_ENV==="production"?oe.exports=Ne():oe.exports=ke()),oe.exports}var e=Se();function Te(t){return t.template?t.template:"tab"}function Ee(t){const n={};return Object.entries(t).forEach(([c,a])=>{const o=a.group||"General";n[o]||(n[o]={label:o,type:"fields",fields:[]}),n[o]?.fields?.push({name:c,...a})}),n}const q={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function U(t){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(t)?t:6}const Q=(t,n)=>typeof t=="string"?t.replace(/#(\w+)#/g,(c,a)=>n[a]!==void 0?String(n[a]):c):Array.isArray(t)?t.map(c=>Q(c,n)):t&&typeof t=="object"?Object.fromEntries(Object.entries(t).map(([c,a])=>[Q(c,n),Q(a,n)])):t,ge=t=>{const n=Array.isArray(t?.data?.data)?t.data.data[0]:Array.isArray(t?.data)?t.data[0]:t?.data?.data??t?.data;return n&&typeof n=="object"&&!Array.isArray(n)?n:null},ye=(t,n,c)=>{const a=Array.isArray(c?.data?.data)?c.data.data:Array.isArray(c?.data)?c.data:c;if(!Array.isArray(a)||a.length===0)return{};const o={};return a.forEach(l=>{l[t]!=null&&l[n]!=null&&(o[l[t]]=l[n])}),o};function pe(t,n){if(!n||Object.keys(n).length===0)return t;if(typeof t=="number")return n[String(t)]??t;if(typeof t=="string"){const a=t.split(",").map(o=>o.trim()).map(o=>n[o]).filter(Boolean);return a.length?a.join(", "):t}return t}const be="https://st.depositphotos.com/2101611/3925/v/450/depositphotos_39258143-stock-illustration-businessman-avatar-profile-picture.jpg";function ee({field:t,data:n,methods:c={},sqlOpsUrls:a,refid:o}){const l=t?.name,x=`
    text-sm text-gray-600 break-words
  `,d=`
    block text-sm font-semibold  transition-all duration-300 text-gray-700 capitalize
  `,[j,u]=h.useState(t.options??{});h.useEffect(()=>{let N=!0;return(async()=>{if(t?.options){u(t.options);return}const S=t?.source??{};if(S.type==="method"){const y=S.method,T=y?c[y]:void 0;if(T)try{const w=await Promise.resolve(T());N&&u(w??{})}catch(w){console.error("Method execution failed:",w),N&&u({})}else N&&u({})}if(S.type==="api"&&S.url)try{const y=await I({method:S.method||"GET",url:S.url,data:S.body??{},params:S.params??{},headers:S.headers??{}}),T=t.valueKey||"value",w=t.labelKey||"title",D=ye(T,w,y);N&&u(D)}catch(y){console.error("API execution failed:",y),N&&u({})}if(t.table||t.type==="dataSelector"){if(!a){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let y;if(t.type==="dataSelector")y={...t,table:"do_lists",cols:"title,value",where:{groupid:t.groupid??""}};else{if(!t.table||!t.columns){console.error("Invalid SQL field config",t);return}y={...t,table:t.table,cols:t.columns}}t.where&&t.type!=="dataSelector"&&(y.where=o?Q(t.where,{refid:o}):t.where);const T=await I({method:"POST",url:a.baseURL+a.registerQuery,data:{query:y},headers:{Authorization:`Bearer ${a?.accessToken}`}}),w=await I({method:"POST",url:a.baseURL+a.runQuery,data:{queryid:T.data.queryid,filter:{}},headers:{Authorization:`Bearer ${a?.accessToken}`}}),D=t.valueKey||"value",E=t.labelKey||"title",L=ye(D,E,w);N&&u(L)}catch(y){console.error("API fetch failed:",y)}}})(),()=>{N=!1}},[t.options,t.source,t.table,t.columns,t.where,o]);const f=typeof l=="string"?n?.[l]:void 0,s=typeof f=="string"?t.type==="date"?f.split("T")[0]:t.type==="time"?f.includes("T")?f.slice(11,16):f.slice(0,5):pe(f,j):pe(f,j),i=typeof l=="string"&&(l.toLowerCase().includes("avatar")||l.toLowerCase().includes("logo")),g=s==null?"":typeof s=="string"||typeof s=="number"?s:JSON.stringify(s);return e.jsxs("div",{className:"px-3 py-2 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:d,children:t?.label}),e.jsx("div",{className:"relative",children:i?e.jsx("img",{src:String(s),alt:"avatar",className:"w-16 h-16 rounded-full object-cover border",onError:N=>{const C=N.currentTarget;C.onerror=null,C.src=be}}):e.jsx("p",{className:x,children:g})})]})}function Ae({commonInfo:t,infoData:n,hiddenFields:c=[]}){return e.jsx("div",{className:"bg-white border border-gray-100 p-4 min-h-3/10 overflow-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 flex flex-col items-center",children:e.jsx("div",{className:"relative w-42 h-42",children:e.jsx("img",{src:String(n.avatar_photo),alt:"Profile",className:" w-full h-full object-cover border-4 rounded-[12px] border-white shadow-lg",onError:a=>{const o=a.currentTarget;o.onerror=null,o.src=be}})})}),e.jsx("div",{className:"lg:col-span-10 min-h-0 max-h-40  overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:t.fields?.map((a,o)=>{const l=n?.[a.name];return c.includes(a.name)||!l&&l!==!1&&l!==0?null:e.jsx("div",{className:`hover:bg-gray-100 transition-colors duration-200 col-span-12 sm:col-span-6 ${q[U(a.width)]||"lg:col-span-4"}`,children:e.jsx(ee,{field:a,data:n??{}},a?.name||o)},a.name)})})})]})})}function ue({tabObj:t,methods:n,tabName:c,sqlOpsUrls:a,refid:o}){const[l,x]=h.useState(null);return h.useEffect(()=>{let d=!1;return(async()=>{const u=t?.config;if(!u?.type){d||x(null);return}if(u.type==="method"){const f=u.method,s=f?n[f]:void 0;if(s)try{const i=await Promise.resolve(s());d||x(i||null)}catch(i){console.error("Method execution failed:",i),d||x(null)}else d||x(null)}if(u.type==="api")try{const f=await I({method:u.method||"GET",url:u.url,data:u.body||{},params:u.params||{},headers:u.headers||{}});d||x(f.data||null)}catch(f){console.error("API fetch failed:",f),d||x(null)}if(u.type==="sql"&&o&&o!="0"){if(!a){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const f=await I({method:"POST",url:a.baseURL+a.registerQuery,data:{query:{...u,cols:u.cols,table:u.table,where:Q(u.where,{refid:u.refid})}},headers:{Authorization:`Bearer ${a?.accessToken}`}}),s=await I({method:"POST",url:a.baseURL+a.runQuery,data:{queryid:f.data.queryid,filter:{}},headers:{Authorization:`Bearer ${a?.accessToken}`}}),i=ge(s);d||x(i)}catch(f){console.error("API fetch failed:",f)}}})(),()=>{d=!0}},[t?.config?.type||"",t?.config?.method||"",t?.config?.url||"",JSON.stringify(t?.config?.params||{}),JSON.stringify(t?.config?.body||{}),JSON.stringify(t?.config?.headers||{})]),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:l?Object.keys(l).map((d,j)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${q[U(t.width)]||"lg:col-span-2"}`,children:e.jsx(ee,{field:{name:d,label:d},data:l??{},methods:n,refid:o,sqlOpsUrls:a},d)},`field-${j}`)):e.jsx("div",{className:"col-span-12 flex flex-col  min-h-0",children:e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsxs("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 7 4-4 4 4"})]})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:"There are no records to display  at the moment."})]})})})})}function Pe({open:t,title:n="Confirm Delete",message:c="Are you sure you want to delete this record?",onConfirm:a,onCancel:o}){return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-sm p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:n}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:c}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm rounded border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null}function fe({tabObj:t,methods:n,tabName:c,sqlOpsUrls:a,refid:o,Reports:l,toast:x,handleAction:d,infoViewJson:j}){const[u,f]=h.useState(1),[s,i]=h.useState(10),[g,N]=h.useState(""),[C,S]=h.useState(!1),[y,T]=h.useState(null),[w,D]=h.useState([]);h.useRef(null);const[E,L]=h.useState(null),[_,z]=h.useState({key:"",direction:null}),[te,O]=h.useState(null),p=t?.config;console.log("tabObj",t),console.log("source",p);const K=h.useCallback(async()=>{if(!p?.type){D([]);return}if(p.type==="method"){const b=p.method,v=b?n[b]:void 0;if(!v){D([]);return}try{const A=await Promise.resolve(v());D(A||[])}catch{D([])}}if(p.type==="api")try{const b=await I({method:p.method||"GET",url:p.url,data:p.body||{},params:p.params||{},headers:p.headers||{}});D(b.data||[])}catch(b){console.error("API fetch failed:",b),D([])}if(p.type==="sql"&&o&&o!=="0"){if(!a){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const{form:b,actions:v,uimode:A,type:P,unilinks:R,DEBUG:X,...ae}=p,ne=await I({method:"POST",url:a.baseURL+a.registerQuery,data:{query:{...ae,where:Q(p.where,{refid:o})}},headers:{Authorization:`Bearer ${a.accessToken}`}}),V=await I({method:"POST",url:a.baseURL+a.runQuery,data:{queryid:ne.data.queryid,filter:{}},headers:{Authorization:`Bearer ${a.accessToken}`}});D(V.data?.data??V.data??[])}catch(b){console.error("SQL fetch failed:",b)}}},[t?.config,n,o,a]);h.useEffect(()=>{K()},[K]);const Y=Array.isArray(w)?w:[w],G=(b=>{const v=new Set;return b.forEach(A=>{A&&typeof A=="object"&&Object.keys(A).forEach(P=>v.add(P))}),Array.from(v)})(Y);t?.vmode;const B=t?.config,H=B?.["popup.form"]?"popup.form":(B?.form,"form"),le=B?.[H]&&Object.keys(B?.[H]).length>0;B?.info&&Object.keys(B?.info).length>0;const ie=b=>!_.key||!_.direction?b:[...b].sort((v,A)=>{const P=v[_.key],R=A[_.key];if(P==null)return _.direction==="asc"?1:-1;if(R==null)return _.direction==="asc"?-1:1;if(typeof P=="boolean"&&typeof R=="boolean")return _.direction==="asc"?P===R?0:P?-1:1:P===R?0:P?1:-1;const X=new Date(P),ae=new Date(R);if(!isNaN(X.getTime())&&!isNaN(ae.getTime()))return _.direction==="asc"?X.getTime()-ae.getTime():ae.getTime()-X.getTime();const ne=parseFloat(P),V=parseFloat(R);if(!isNaN(ne)&&!isNaN(V))return _.direction==="asc"?ne-V:V-ne;const ce=String(P).toLowerCase(),de=String(R).toLowerCase();return _.direction==="asc"?ce<de?-1:ce>de?1:0:ce>de?-1:ce<de?1:0}),r=h.useMemo(()=>{let b=Y;if(g.trim()){const v=g.toLowerCase();b=Y.filter(A=>G.some(P=>{const R=A[P];return R==null?!1:String(R).toLowerCase().includes(v)}))}return ie(b)},[Y,g,G,_]);Math.ceil(r.length/s);const m=(u-1)*s,k=m+s;r.slice(m,k);const $=b=>{T(b),S(!0)},F=async()=>{if(y?.id){if(!a){O({type:"error",message:"Delete configuration missing."});return}try{let b=t?.config;const v=b?.["popup.form"]?"popup.form":(b?.form,"form");console.log("config?.[formType]",b?.[v]);const A=b?.[v];if(!A?.source)throw new Error("Form source missing");const P=await I({method:"GET",url:a.baseURL+a.dbopsGetHash,headers:{Authorization:`Bearer ${a.accessToken}`}});let R={...A.source,refid:y.id};A.source.where&&(R={...R,where:Q(A.source.where,{refid:y.id})});const X=await I({method:"POST",url:a.baseURL+a.dbopsGetRefId,data:{operation:"update",source:R,fields:A.fields,forcefill:A.forcefill,datahash:P.data.refhash},headers:{Authorization:`Bearer ${a.accessToken}`}});await I({method:"POST",url:a.baseURL+a.dbopsUpdate,data:{refid:X.data.refid,fields:{blocked:"true"},datahash:P.data.refhash},headers:{Authorization:`Bearer ${a.accessToken}`}}),window.alert("Record deleted successfully."),K()}catch(b){console.error(b),window.alert("Failed to delete record. Please try again")}finally{T(null),S(!1),setTimeout(()=>O(null),3e3)}}},M=()=>{T(null),S(!1)},re=()=>{n?.addInfoRecord?.({[H]:t?.config?.[H]},o)};return h.useMemo(()=>({totalRows:r.length,columns:G.length,currentPageStart:m+1,currentPageEnd:Math.min(k,r.length),isFiltered:g.trim().length>0}),[r,Y,G,m,k]),Y.length===0||G.length===0?e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsxs("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 7 4-4 4 4"})]})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:"There are no records to display in the grid view at the moment."}),le&&e.jsxs("button",{onClick:re,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-action cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Record"]})]}):e.jsx(e.Fragment,{children:l?e.jsxs(e.Fragment,{children:[e.jsx(l,{methods:{...n,deleteRecord:$},report:{source:{table:p?.table,type:"sql",cols:p?.cols,where:p?.where,orderby:p?.orderby},endPoints:a,actions:{...p?.actions,...j?.buttons,...j.actions},datagrid:p?.datagrid,buttons:p?.buttons},onButtonClick:d}),e.jsx(Pe,{open:C,onConfirm:F,onCancel:M})]}):e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"Reports component is not available."})})}const ve=({groups:t,groupNames:n,setActiveTabIndex:c,activeTabIndex:a})=>e.jsx("nav",{className:"flex flex-col overflow-y-auto h-full px-2 py-1 space-y-1",children:n.length>0?n.map((o,l)=>e.jsx("button",{type:"button",onClick:()=>c(l),className:`cursor-pointer w-full text-left py-2 px-3 rounded-md text-sm font-semibold transition-all duration-200 ${a===l?"bg-white shadow text-action":"text-gray-600 hover:bg-white/50"}`,children:e.jsx("span",{className:"truncate",children:t[o]?.label||o})},o)):e.jsx("div",{className:"py-3 px-2 text-sm text-gray-500",children:"No group available"})}),Ce=({groups:t,groupNames:n,setActiveTabIndex:c,activeTabIndex:a,layoutConfig:o,showScrollHint:l,isCommonInfo:x,tabsNavRef:d})=>{const[j,u]=h.useState(!1),f=h.useRef(null);return h.useEffect(()=>{const s=i=>{f.current&&!f.current.contains(i.target)&&u(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:o?.tabNavClass||"relative z-10",children:[l&&e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-12 flex items-center justify-center",children:e.jsx("button",{onClick:()=>d.current?.scrollBy({left:-200,behavior:"smooth"}),className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200 group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-gray-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),e.jsxs("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-18 flex items-center justify-between pr-1",children:[l&&e.jsx("button",{onClick:()=>d.current?.scrollBy({left:200,behavior:"smooth"}),className:"w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200 group",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600 group-hover:text-gray-800 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"relative",ref:f,children:[e.jsx("button",{onClick:()=>u(!j),className:"ml-1 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200 flex items-center justify-center hover:bg-white hover:shadow-xl transition-all duration-200",children:"â‹®"}),j&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 max-h-100 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-30",children:n.map((s,i)=>e.jsx("button",{type:"button",onClick:()=>{c(i),u(!1)},className:`w-full text-left px-3 py-2 text-sm truncate hover:bg-gray-100 ${a===i?"bg-gray-50 font-semibold text-action":"text-gray-700"}`,children:t[s]?.label||s},s))})]})]}),e.jsx("div",{className:`relative bg-gray-100 ${x?"":"rounded-t-lg"} px-12 pt-1 shadow-inner overflow-hidden`,children:e.jsx("nav",{ref:d,className:"relative flex overflow-x-auto scrollbar-hide scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.length>0?n.map((s,i)=>e.jsx("button",{type:"button",onClick:()=>c(i),className:`relative cursor-pointer flex-shrink-0
            min-w-[8rem]   
            py-2 px-8
            rounded-t-lg text-xs sm:text-sm font-semibold
            transition-all duration-300 ease-out
            focus:outline-none whitespace-nowrap
            ${a===i?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-1 sm:gap-2",children:e.jsx("span",{className:"truncate",children:t[s]?.label||s})})},s)):e.jsx("div",{className:"py-3 px-6 text-sm text-gray-500",children:"No group available"})})})]})},je=({groupNames:t,activeTabIndex:n,layoutConfig:c,tabObj:a,infoData:o,setActiveTabIndex:l,renderView:x,methods:d={},refid:j,sqlOpsUrls:u})=>e.jsxs("div",{className:"bg-white rounded-b-lg border  border-t-0 border-gray-100 p-3 animate-in fade-in duration-300 flex-1 flex flex-col min-h-0",children:[t.length>0?a?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:c?.fieldGridClass||"grid grid-cols-12 gap-2",children:a.fields.map((f,s)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${q[U(f.width)]||"lg:col-span-2"}`,children:e.jsx(ee,{field:f,data:o??{},methods:d,refid:j,sqlOpsUrls:u})},f?.name??`field-${s}`))})}):a?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:x(a,t[n]||"")}):null:e.jsx("div",{className:"flex-1 col-span-full text-center py-8 text-gray-500",children:"No data available"}),t.length>5&&e.jsxs("div",{className:"mt-10 pt-2 border-t border-gray-100 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Tab ",n+1," of ",t.length]}),e.jsxs("div",{className:"flex gap-1",children:[t.slice(0,5).map((f,s)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${s===n?"bg-action w-6":"bg-gray-300"}`},s)),t.length>5&&e.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["+",t.length-5]})]})]}),e.jsxs("div",{className:"hidden sm:flex gap-2",children:[e.jsx("button",{onClick:()=>l(Math.max(0,n-1)),disabled:n===0,className:"px-3 py-1 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsx("button",{onClick:()=>l(Math.min(t.length-1,n+1)),disabled:n===t.length-1,className:"px-3 py-1 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]}),t.length<=5&&e.jsx("div",{className:"mt-6 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Tab ",n+1," of ",t.length]}),e.jsx("div",{className:"flex gap-1",children:t.map((f,s)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${s===n?"bg-action w-6":"bg-gray-300"}`},s))})]})})]},t[n]);function we({groups:t,methods:n={},infoData:c,viewRenderers:a={},isCommonInfo:o,layoutConfig:l={},viewMode:x,sqlOpsUrls:d={},refid:j,Reports:u,toast:f={},handleAction:s=()=>{},infoViewJson:i}){const[g,N]=h.useState(0),[C,S]=h.useState(!1),y=h.useRef(null),T=Object.keys(t);h.useEffect(()=>{const O=()=>{if(y.current){const p=y.current;S(p.scrollWidth>p.clientWidth)}};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[T.length]),h.useEffect(()=>{if(y.current&&T.length>0){const O=y.current.children[g];O&&O.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[g,T.length]);const w=x==="tableft",D=x==="tabright",E=!w&&!D,L=t[T[g]??""]||null,_={single:(O,p)=>e.jsx(ue,{tabObj:O,methods:n,tabName:p,sqlOpsUrls:d,refid:j}),grid:(O,p)=>e.jsx(fe,{...u?{Reports:u}:{},toast:f,handleAction:s,tabObj:O,methods:n,tabName:p,sqlOpsUrls:d,refid:j,infoViewJson:i})},z=L?.config?.uimode,te=a[z]||_[z]||(()=>e.jsx("div",{className:"flex-1 flex justify-center p-4",children:"No UI mode for this type"}));return E?e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 ",children:[e.jsx(Ce,{groupNames:T,groups:t,setActiveTabIndex:N,activeTabIndex:g,tabsNavRef:y,isCommonInfo:o,showScrollHint:C,layoutConfig:l}),e.jsx(je,{groupNames:T,activeTabIndex:g,layoutConfig:l,tabObj:L,infoData:c,setActiveTabIndex:N,renderView:te,groups:t,methods:n,refid:j,sqlOpsUrls:d})]}):e.jsxs("div",{className:"flex-1 flex min-h-0",children:[w&&e.jsx("aside",{className:"flex-shrink-0 w-56 border-r border-gray-200 bg-gray-50 p-2",children:e.jsx(ve,{groupNames:T,groups:t,setActiveTabIndex:N,activeTabIndex:g})}),e.jsx("main",{className:"flex-1 flex flex-col min-h-0 overflow-auto",children:e.jsx(je,{groupNames:T,activeTabIndex:g,layoutConfig:l,tabObj:L,infoData:c,setActiveTabIndex:N,renderView:te,groups:t,methods:n,refid:j,sqlOpsUrls:d})}),D&&e.jsx("aside",{className:"flex-shrink-0 w-56 border-l border-gray-200 bg-gray-50 p-2",children:e.jsx(ve,{groupNames:T,groups:t,setActiveTabIndex:N,activeTabIndex:g})})]})}function _e({title:t,children:n,isFirst:c}){const[a,o]=h.useState(c);return e.jsx("div",{className:"group relative mt-1 flex-1 flex flex-col min-h-0 max-h-screen",children:e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[e.jsxs("button",{onClick:()=>o(!a),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${a?"bg-action":"bg-gray-300"}`}),e.jsx("h3",{className:"text-md capitalize font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]}),e.jsxs("div",{className:`relative transition-all duration-300 ${a?"rotate-180":""}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${a?"bg-action opacity-30":"bg-transparent opacity-0"}`}),e.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:`flex-1 flex flex-col min-h-0 transition-all  duration-500 ease-in-out overflow-hidden ${a?"max-h-full opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white flex-1 flex flex-col min-h-0",children:e.jsx("div",{className:"space-y-5 pt-4 flex-1 flex flex-col min-h-0 overflow-y-auto",children:n})})})]})})}function Le({groups:t,methods:n={},infoData:c,viewRenderers:a={},sqlOpsUrls:o={},refid:l,Reports:x,toast:d={},handleAction:j=()=>{},infoViewJson:u}){const f={single:(s,i)=>e.jsx(ue,{tabObj:s,methods:n,tabName:i,sqlOpsUrls:o,refid:l}),grid:(s,i)=>e.jsx(fe,{...x?{Reports:x}:{},toast:d,infoViewJson:u,handleAction:j,tabObj:s,methods:n,tabName:i,sqlOpsUrls:o,refid:l})};return e.jsx("div",{className:"bg-white animate-in fade-in duration-300 rounded-b-2xl border-t-0 border border-gray-100",children:e.jsx("div",{className:"p-4 mx-auto",children:e.jsx("div",{className:"space-y-2 flex flex-col min-h-0",children:t&&Object.entries(t).map(([s,i],g)=>e.jsx(_e,{title:s,isFirst:g===0,children:i?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:i.fields.map((N,C)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${q[U(N.width)]||"lg:col-span-2"}`,children:e.jsx(ee,{methods:n,field:N,data:c??{},sqlOpsUrls:o,refid:l})},N?.name??`field-${C}`))})}):i?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:a[i.config?.uimode]?.(i)||f[i.config?.uimode]?.(i,s)||e.jsx("div",{children:"No renderer for this type"})}):null},s))})})})}function Re({title:t,children:n}){return e.jsx("div",{className:"group relative mt-1 flex-1 flex flex-col min-h-0 max-h-screen",children:e.jsxs("div",{className:"flex flex-col min-h-0 relative  bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[e.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),e.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r capitalize from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]})}),e.jsx("div",{className:`flex flex-col min-h-0 transition-all duration-500 ease-in-out opacity-100'
            }`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white flex flex-col min-h-0",children:e.jsx("div",{className:"space-y-5 pt-4 flex-1 flex flex-col min-h-0 overflow-y-auto",children:n})})})]})})}function $e({groups:t,methods:n={},infoData:c,viewRenderers:a={},sqlOpsUrls:o={},refid:l,Reports:x,toast:d={},handleAction:j=()=>{},infoViewJson:u}){const f={single:(s,i)=>e.jsx(ue,{tabObj:s,methods:n,tabName:i,sqlOpsUrls:o,refid:l}),grid:(s,i)=>e.jsx(fe,{...x?{Reports:x}:{},toast:d,handleAction:j,tabObj:s,methods:n,tabName:i,sqlOpsUrls:o,refid:l,infoViewJson:u})};return e.jsx("div",{className:"bg-white animate-in fade-in duration-300 rounded-b-2xl border-t-0 border border-gray-100",children:e.jsx("div",{className:"p-4 mx-auto",children:e.jsx("div",{className:"space-y-2  flex flex-col min-h-0",children:t&&Object.entries(t).map(([s,i],g)=>e.jsx(Re,{title:s,children:i?.fields?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:i.fields.map((N,C)=>e.jsx("div",{className:`col-span-12 sm:col-span-6 ${q[U(N.width)]||"lg:col-span-2"}`,children:e.jsx(ee,{methods:n,field:N,data:c??{},sqlOpsUrls:o,refid:l})},N?.name??`field-${C}`))})}):i?e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto min-h-0",children:a[i.config?.uimode]?.(i)||f[i.config?.uimode]?.(i,s)||e.jsx("div",{children:"No renderer for this type"})}):null},s))})})})}function De({infoViewJson:t,data:n={},hiddenFields:c=[],groupFieldsFn:a=Ee,layoutConfig:o={},viewRenderers:l={},methods:x={},Reports:d,toast:j={},handleAction:u=()=>{}}){const[f,s]=h.useState({}),i=Te(t.infoview??{}),g=t.endPoints??{},N=h.useMemo(()=>a(t.fields||{}),[t.fields,a]),C=t?.source?.refid;let S={...N};t.infoview?.groups&&(S={...S,...t.infoview.groups}),h.useEffect(()=>{let w=!1;return(async()=>{const E=t?.source;if(!E?.type){w||s({});return}if(E.type==="method"){const L=E.method,_=L?x[L]:void 0;if(_)try{const z=await Promise.resolve(_());w||s(z||{})}catch(z){console.error("Method execution failed:",z),w||s({})}else w||s({})}if(E.type==="api")try{const L=await I({method:E.method||"GET",url:E.url,data:E.body||{},params:E.params||{},headers:E.headers||{}});w||s(L.data||{})}catch(L){console.error("API fetch failed:",L),w||s({})}if(E.type==="sql"&&E.refid&&E.refid!="0"){if(!g){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const L=await I({method:"POST",url:g.baseURL+g.registerQuery,data:{query:{...E,cols:E.cols,table:E.table,where:Q(E.where,{refid:E.refid})}},headers:{Authorization:`Bearer ${g?.accessToken}`}}),_=await I({method:"POST",url:g.baseURL+g.runQuery,data:{queryid:L.data.queryid,filter:{}},headers:{Authorization:`Bearer ${g?.accessToken}`}}),z=ge(_)??{};w||s(z)}catch(L){console.error("API fetch failed:",L)}}})(),()=>{w=!0}},[t?.source?.type||"",t?.source?.method||"",t?.source?.url||"",JSON.stringify(t?.source?.params||{}),JSON.stringify(t?.source?.body||{}),JSON.stringify(t?.source?.headers||{})]);const y=S.common||null;y&&delete S.common;const T=w=>{switch(w){case"accordion":return e.jsx(Le,{groups:S,methods:x,infoData:f,viewRenderers:l,sqlOpsUrls:g,refid:C,...d?{Reports:d}:{},toast:j,handleAction:u,infoViewJson:t});case"tab":case"tableft":case"tabright":return e.jsx(we,{groups:S,viewRenderers:l,layoutConfig:o,methods:x,infoData:f,isCommonInfo:!!y,viewMode:w,sqlOpsUrls:g,refid:C,...d?{Reports:d}:{},toast:j,handleAction:u,infoViewJson:t});case"cards":return e.jsx($e,{groups:S,viewRenderers:l,methods:x,infoData:f,sqlOpsUrls:g,refid:C,...d?{Reports:d}:{},toast:j,handleAction:u,infoViewJson:t});default:return e.jsx(we,{groups:S,viewRenderers:l,layoutConfig:o,methods:x,infoData:f,isCommonInfo:!!y,viewMode:w,sqlOpsUrls:g,refid:C,...d?{Reports:d}:{},toast:j,handleAction:u,infoViewJson:t})}};return e.jsxs("div",{className:o.containerClass||"h-screen flex flex-col ",children:[y&&e.jsx(Ae,{commonInfo:y,infoData:f,hiddenFields:c}),T(i)]})}W.InfoView=De,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
